<!DOCTYPE html>
<html>
<head>
  <title>Séance 3: Fonctions</title>
  <meta charset="utf-8">
  <meta name="description" content="Séance 3: Fonctions">
  <meta name="author" content="Dominique Gravel">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="./libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="./libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/default.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>
<link rel=stylesheet href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="./libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="./libraries/frameworks/io2012/js/slides" 
    src="./libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="assets/img/logo.png">
  </aside>
  <hgroup class="auto-fadein">
    <h1>Séance 3: Fonctions</h1>
    <h2>https://econumuds.github.io/BIO109/cours3/</h2>
    <p>Dominique Gravel<br/>Laboratoire d'écologie intégrative </p>
  </hgroup>
  <article></article>
  <footer class = 'license'>
    <a href='http://creativecommons.org/licenses/by-nc-sa/3.0/'>
    <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png'>
    </a>
  </footer>
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <!--   <article data-timings="">
    <p>--- .transition</p>

<h1>Opérations mathématiques de base</h1>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-2" style="background:;">
  <!--  <a href="#slide-2"></a> -->
  <hgroup>
    <h1>Astuce: générer des nombres aléatoires</h1>
  </hgroup>
  <article data-timings="">
    <p>Il peut souvent être pratique de générer des chiffres au hasard, sur lesquels on souhaite faire des tests. Nous verrons plusieurs exemples au cours 5, mais pour l&#39;instant, prenez note de la fonction suivante:</p>

<pre><code class="r">alea &lt;- runif(n = 10, min = 0, max = 1)
alea
</code></pre>

<pre><code>##  [1] 0.4117047 0.4630194 0.2891859 0.5491750 0.6044720 0.4267765 0.8056156
##  [8] 0.7329082 0.3285725 0.7033833
</code></pre>

<p>Ici la distribution utilisée est la distribution uniforme, toutes les autres distributions en sont dérivées. </p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-3" style="background:;">
  <!--  <a href="#slide-3"></a> -->
  <hgroup>
    <h1>Opérateurs de base</h1>
  </hgroup>
  <article data-timings="">
    <p>R peut faire toutes les opérations mathématiques de base d&#39;une calculatrice :</p>

<pre><code class="r">3 + 7
</code></pre>

<pre><code>## [1] 10
</code></pre>

<pre><code class="r">3 - 7
</code></pre>

<pre><code>## [1] -4
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-4" style="background:;">
  <!--  <a href="#slide-4"></a> -->
  <hgroup>
    <h1>Opérateurs de base</h1>
  </hgroup>
  <article data-timings="">
    <p>R peut faire toutes les opérations mathématiques de base d&#39;une calculatrice :</p>

<pre><code class="r">3 * 7
</code></pre>

<pre><code>## [1] 21
</code></pre>

<pre><code class="r">3 / 7
</code></pre>

<pre><code>## [1] 0.4285714
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-5" style="background:;">
  <!--  <a href="#slide-5"></a> -->
  <hgroup>
    <h1>Opérateurs de base</h1>
  </hgroup>
  <article data-timings="">
    <p>R respecte la séquence des opérations, tel que démontré par l&#39;exemple suivant :</p>

<pre><code class="r">3 + 7 / 2 * 5
</code></pre>

<pre><code>## [1] 20.5
</code></pre>

<pre><code class="r">3 + (7 / 2) * 5
</code></pre>

<pre><code>## [1] 20.5
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-6" style="background:;">
  <!--  <a href="#slide-6"></a> -->
  <hgroup>
    <h1>Opérations sur des vecteurs et matrices</h1>
  </hgroup>
  <article data-timings="">
    <p>Par défaut, le produit de vecteurs et de matrices est <em>scalaire</em> : </p>

<pre><code class="r">vec1 &lt;- runif(10,0,1)
vec1
</code></pre>

<pre><code>##  [1] 0.4268482 0.1218157 0.1518030 0.3570744 0.5828849 0.9713607 0.8851110
##  [8] 0.8361815 0.3701579 0.8209280
</code></pre>

<pre><code class="r">3*vec1
</code></pre>

<pre><code>##  [1] 1.2805446 0.3654471 0.4554090 1.0712232 1.7486547 2.9140820 2.6553330
##  [8] 2.5085444 1.1104738 2.4627841
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-7" style="background:;">
  <!--  <a href="#slide-7"></a> -->
  <hgroup>
    <h1>Opérations sur des vecteurs et matrices</h1>
  </hgroup>
  <article data-timings="">
    <p>La situation plus compliquée survient lorsque l&#39;on multiplie des vecteurs et des matrices : </p>

<pre><code class="r">vec1 &lt;- c(10,20,30)
mat1 &lt;- matrix(c(1:6),nr = 3, nc = 2)
mat1
</code></pre>

<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6
</code></pre>

<pre><code class="r">vec1 * mat1
</code></pre>

<pre><code>##      [,1] [,2]
## [1,]   10   40
## [2,]   40  100
## [3,]   90  180
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-8" style="background:;">
  <!--  <a href="#slide-8"></a> -->
  <hgroup>
    <h1>Opérations avancées</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">log(100)
</code></pre>

<pre><code>## [1] 4.60517
</code></pre>

<pre><code class="r">log10(100)
</code></pre>

<pre><code>## [1] 2
</code></pre>

<pre><code class="r">exp(10)
</code></pre>

<pre><code>## [1] 22026.47
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-9" style="background:;">
  <!--  <a href="#slide-9"></a> -->
  <hgroup>
    <h1>Opérations avancées</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">10^2
</code></pre>

<pre><code>## [1] 100
</code></pre>

<pre><code class="r">sqrt(100)
</code></pre>

<pre><code>## [1] 10
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-10" style="background:;">
  <!--  <a href="#slide-10"></a> -->
  <hgroup>
    <h1>Opérations avancées</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">alea = runif(10,0,1)
alea
</code></pre>

<pre><code>##  [1] 0.10642507 0.70747217 0.82837847 0.62941960 0.13560792 0.33757582
##  [7] 0.95429717 0.01835642 0.24215448 0.40805915
</code></pre>

<pre><code class="r">min(alea)
</code></pre>

<pre><code>## [1] 0.01835642
</code></pre>

<pre><code class="r">max(alea)
</code></pre>

<pre><code>## [1] 0.9542972
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-11" style="background:;">
  <!--  <a href="#slide-11"></a> -->
  <hgroup>
    <h1>Arrondir</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">pi
</code></pre>

<pre><code>## [1] 3.141593
</code></pre>

<pre><code class="r">floor(pi)
</code></pre>

<pre><code>## [1] 3
</code></pre>

<pre><code class="r">ceiling(pi)
</code></pre>

<pre><code>## [1] 4
</code></pre>

<pre><code class="r">round(pi,4)
</code></pre>

<pre><code>## [1] 3.1416
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-12" style="background:;">
  <!--  <a href="#slide-12"></a> -->
  <hgroup>
    <h1>Opérations sur des matrices</h1>
  </hgroup>
  <article data-timings="">
    <p>Parfois, on souhaite calculer des propriétés sur des colonnes et des rangées, Certaines commandes permettent de prendre des raccourcis :</p>

<pre><code class="r">mat &lt;- matrix(runif(6,0,1), nr = 3, nc = 2)
mat
</code></pre>

<pre><code>##           [,1]      [,2]
## [1,] 0.3062993 0.2525528
## [2,] 0.3001564 0.8966061
## [3,] 0.9210205 0.3311946
</code></pre>

<pre><code class="r">rowSums(mat)
</code></pre>

<pre><code>## [1] 0.558852 1.196763 1.252215
</code></pre>

<pre><code class="r">colSums(mat)
</code></pre>

<pre><code>## [1] 1.527476 1.480353
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-13" style="background:;">
  <!--  <a href="#slide-13"></a> -->
  <hgroup>
    <h1>Opérations sur des matrices</h1>
  </hgroup>
  <article data-timings="">
    <p>Et de façon plus générale, on peut utiliser la fonction <em>apply()</em> qui est très pratique : </p>

<pre><code class="r">apply(X = mat, MARGIN = 2, FUN = sum)
</code></pre>

<pre><code>## [1] 1.527476 1.480353
</code></pre>

<pre><code class="r">apply(X = mat, MARGIN = 1, FUN = sum)
</code></pre>

<pre><code>## [1] 0.558852 1.196763 1.252215
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-14" style="background:;">
  <!--  <a href="#slide-14"></a> -->
  <hgroup>
    <h1>Opérations sur des matrices</h1>
  </hgroup>
  <article data-timings="">
    <p>Et finalement, bien que vous l&#39;utiliserez peu dans le cours, il est toujours pratique de savoir que la particularité de R d&#39;être un langage vectoriel permet de facilement faire des opérations sur les matrices :</p>

<pre><code class="r">vec1 &lt;- c(10,20,30)
mat1 &lt;- matrix(c(1:6),nr = 3, nc = 2)
vec1 * mat1
</code></pre>

<pre><code>##      [,1] [,2]
## [1,]   10   40
## [2,]   40  100
## [3,]   90  180
</code></pre>

<pre><code class="r">vec1 %*% mat1
</code></pre>

<pre><code>##      [,1] [,2]
## [1,]  140  320
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-15" style="background:;">
  <!--  <a href="#slide-15"></a> -->
  <hgroup>
    <h1>Exercice</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-16" style="background:;">
  <!--  <a href="#slide-16"></a> -->
  <hgroup>
    <h1>Abondances relatives</h1>
  </hgroup>
  <article data-timings="">
    <p>Au moyen du fichier <a href="./donnees/quadrats.csv">quadrats.csv</a>, je vous demande de faire les opérations suivantes: </p>

<ol>
<li>Calculer l&#39;abondance totale pour chacune des espèces, leur abondance moyenne et le coefficient de variation de leur abondance ;</li>
<li>Calculer le nombre total de tiges pour chaque quadrat ;</li>
<li>Transformer l&#39;abondance absolue en abondance relative ;</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-17" style="background:;">
  <!--  <a href="#slide-17"></a> -->
  <hgroup>
    <h1>Abondances relatives</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">quadrats &lt;- read.csv2(file=&quot;./donnees/quadrats.csv&quot;, header=TRUE, stringsAsFactors=FALSE,row.names = 1)
N_total &lt;- apply(quadrats, 2, sum)
N_moy &lt;- apply(quadrats, 2, mean)
N_sd &lt;- apply(quadrats, 2, sd)
N_CV &lt;- N_sd / N_moy
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-18" style="background:;">
  <!--  <a href="#slide-18"></a> -->
  <hgroup>
    <h1>Abondances relatives</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">N_quadrats &lt;- apply(quadrats, 1, sum)
quadrats_rel = quadrats / N_quadrats
head(quadrats_rel)
</code></pre>

<pre><code>##              abba       acpe       acsa       beal       bepa      fagr
## 0-0   0.006024096 0.33132530 0.06626506 0.04216867 0.00000000 0.5542169
## 0-100 0.000000000 0.27777778 0.22222222 0.16666667 0.00000000 0.3333333
## 0-120 0.060606061 0.21212121 0.36363636 0.12121212 0.03030303 0.2121212
## 0-140 0.160000000 0.20000000 0.16000000 0.32000000 0.04000000 0.0800000
## 0-160 0.064516129 0.06451613 0.35483871 0.25806452 0.03225806 0.1935484
## 0-180 0.178571429 0.10714286 0.32142857 0.25000000 0.00000000 0.1071429
##             piru
## 0-0   0.00000000
## 0-100 0.00000000
## 0-120 0.00000000
## 0-140 0.04000000
## 0-160 0.03225806
## 0-180 0.03571429
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-19" style="background:;">
  <!--  <a href="#slide-19"></a> -->
  <hgroup>
    <h1>Les fonctions</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-20" style="background:;">
  <!--  <a href="#slide-20"></a> -->
  <hgroup>
    <h1>Qu&#39;est-ce qu&#39;une fonction ?</h1>
  </hgroup>
  <article data-timings="">
    <p>Une fonction contient une série de commandes (i.e. lignes de code) qui sont exécutées lorsque la fonction est appelée.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-21" style="background:;">
  <!--  <a href="#slide-21"></a> -->
  <hgroup>
    <h1>Un simple exemple</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">ma_fonction &lt;- function(argument1, argument2) {

  # Ce que l&#39;on veut que la fonction exécute
  resultat &lt;- argument1 * argument2 

  # Optionnel. Si l&#39;on veut accéder au résultat de la fonction 
  return(resultat) 
}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-22" style="background:;">
  <!--  <a href="#slide-22"></a> -->
  <hgroup>
    <h1>Pourquoi utiliser des fonctions ?</h1>
  </hgroup>
  <article data-timings="">
    <ol>
<li>Répéter une même tâche mais en changeant ses paramètres</li>
<li>Rendre votre code plus lisible</li>
<li>Rendre votre code plus facile à modifier et à maintenir</li>
<li>Partager du code entre différentes analyses</li>
<li>Partager votre code avec d&#39;autres personnes</li>
<li>Modifier les fonctionalités par défaut de R</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-23" style="background:;">
  <!--  <a href="#slide-23"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <p>Imaginons que l&#39;on souhaite multiplier deux chiffres (disons, 3 et 7) et les diviser par leur somme. </p>

<p>\[
\dfrac{3\times7}{3+7}
\]</p>

<p>On peut écrire ce calcul directement dans la console comme suit</p>

<pre><code class="r">(3*7)/(3+7)
</code></pre>

<pre><code>## [1] 2.1
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-24" style="background:;">
  <!--  <a href="#slide-24"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <p>Si on souhaite faire la même opération pour toutes les pairs de chiffres dans le tableau suivant, comment fait-on ?</p>

<pre><code class="r">tableau &lt;- data.frame(x=rnorm(5),y=rnorm(5))
tableau
</code></pre>

<pre><code>##             x          y
## 1  0.68870937  0.2610257
## 2 -0.09078666  0.5121457
## 3  0.38357330  0.6844517
## 4  2.58457224 -0.1997923
## 5 -0.17819327 -0.2026118
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-25" style="background:;">
  <!--  <a href="#slide-25"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <p>À noter qu&#39;en ayant différents chiffres, la formule vue dans la diapositive précédente devient un peu plus générale :</p>

<p>\[
\dfrac{x\times y}{x+y}
\]</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-26" style="background:;">
  <!--  <a href="#slide-26"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <h2>L&#39;approche longue, pas efficace, mais qui marche...</h2>

<pre><code class="r">(tableau[1,1]*tableau[1,2])/(tableau[1,1]+tableau[1,2])
</code></pre>

<pre><code>## [1] 0.1892853
</code></pre>

<pre><code class="r">(tableau[2,1]*tableau[2,2])/(tableau[2,1]+tableau[2,2])
</code></pre>

<pre><code>## [1] -0.1103477
</code></pre>

<pre><code class="r">(tableau[3,1]*tableau[3,2])/(tableau[3,1]+tableau[3,2])
</code></pre>

<pre><code>## [1] 0.2458158
</code></pre>

<p>Problème: Ce n&#39;est vraiment pas pratique si on a beaucoup de données ou si le format du tableau change.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-27" style="background:;">
  <!--  <a href="#slide-27"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <h2>Une boucle peut sauver du temps...</h2>

<pre><code class="r">for(i in 1:nrow(tableau)){
  res &lt;- (tableau[i,1]*tableau[i,2])/(tableau[i,1]+tableau[i,2])
  print(res)
}
</code></pre>

<pre><code>## [1] 0.1892853
## [1] -0.1103477
## [1] 0.2458158
## [1] -0.2165306
## [1] -0.09480983
</code></pre>

<p>Problème: Qu&#39;est-ce qu&#39;on fait si on veut appliquer ce calcul sur plusieurs tableaux ???</p>

<p>C&#39;est possible, mais ça peut être un peu plus compliqué ! </p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-28" style="background:;">
  <!--  <a href="#slide-28"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <h2>Et si on faisait une fonction...</h2>

<p>La fonction peut permettre de résoudre certains problèmes car elle permet d&#39;appliquer une série de commandes (i.e. lignes de codes) à différents types de données. En d&#39;autre mots, la fonction généralise des commandes spécifiques. </p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-29" style="background:;">
  <!--  <a href="#slide-29"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <h2>Comment construit-on une fonction ?</h2>

<p>On commence par écrire une version spécifique du code que l&#39;on souhaite généraliser.</p>

<pre><code class="r">(3*7)/(3+7)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-30" style="background:;">
  <!--  <a href="#slide-30"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <h2>Comment construit-on une fonction ?</h2>

<p>Ensuite, on définit ce code comme faisant parti d&#39;une fonction.</p>

<pre><code class="r">prodsum &lt;- function(){
  res &lt;- (3*7)/(3+7)
  return(res)
}
</code></pre>

<p>Yééé, on a écrit notre première fonction !! :-)</p>

<pre><code class="r">prodsum()
</code></pre>

<pre><code>## [1] 2.1
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-31" style="background:;">
  <!--  <a href="#slide-31"></a> -->
  <hgroup>
    <h1>Petit problème</h1>
  </hgroup>
  <article data-timings="">
    <p>Cette fonction a le défaut de n&#39;être aucunement générale. Elle va toujours donner le même résultat. :-(</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-32" style="background:;">
  <!--  <a href="#slide-32"></a> -->
  <hgroup>
    <h1>Comment construit-on une fonction ?</h1>
  </hgroup>
  <article data-timings="">
    <p>À noter qu&#39;en utilisant la commande <code>return()</code>, on s&#39;assure de renvoyer ce qui se trouve dans l&#39;objet <code>res</code> à l&#39;utilisateur.</p>

<p>Une notion importante à avoir lorsqu&#39;on construit une fonction est que tout ce qui se trouve à l&#39;<strong>intérieur</strong> d&#39;une fonction est <em>entièrement</em> indépendent de ce qui se trouve à l&#39;<strong>extérieur</strong> d&#39;une fonction.</p>

<p>Par exemple, l&#39;objet <code>res</code> à l&#39;extérieur de la fonction <strong>n&#39;existe pas</strong>. Il a un sense uniquement à l&#39;intérieur de la fonction.</p>

<hr>

<h1>Comment rendre la fonction plus générale ?</h1>

<p>On peut généraliser cette fonction, en implémentant directement la formule générale présentée précédemment :</p>

<p>\[
\dfrac{x\times y}{x+y}
\]</p>

<p>Pour ce faire, il faut ajouter des <strong>arguments</strong> à notre fonction.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-33" style="background:;">
  <!--  <a href="#slide-33"></a> -->
  <hgroup>
    <h1>Comment rendre la fonction plus générale ?</h1>
  </hgroup>
  <article data-timings="">
    <p>Les <strong>arguments</strong> peuvent varier selon ce que l&#39;utilisateur souhaite calculer. Il faut donc s&#39;assurer que les mêmes opérations soient réalisées sur ces arguments. </p>

<pre><code class="r">prodsum &lt;- function(x,y){
  res &lt;- (x*y)/(x+y)
  return(res)
}
</code></pre>

<p>Avec cette fonction on peut faire le calcul qui nous intéresse avec différentes séries de chiffres.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-34" style="background:;">
  <!--  <a href="#slide-34"></a> -->
  <hgroup>
    <h1>Comment rendre la fonction plus générale ?</h1>
  </hgroup>
  <article data-timings="">
    <p>Autre charactéristique importante des arguments d&#39;une fonction: les objets passés en argument n&#39;ont pas besoin d&#39;avoir le même nom que les arguments. En fait, c&#39;est en général rarement le cas : </p>

<pre><code class="r">a &lt;- 1
b &lt;- 2
prodsum(x = a, y = b)
</code></pre>

<pre><code>## [1] 0.6666667
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-35" style="background:;">
  <!--  <a href="#slide-35"></a> -->
  <hgroup>
    <h1>Utilisons notre fonction avec des chiffres</h1>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">prodsum(x = 3, y = 7)
</code></pre>

<pre><code>## [1] 2.1
</code></pre>

<pre><code class="r">prodsum(y = 7, x = 3)
</code></pre>

<pre><code>## [1] 2.1
</code></pre>

<p>Comme on le constate, dans le language R, les arguments des peuvent être définis de deux façons.</p>

<ul>
<li>En suivant l&#39;ordre des arguments</li>
<li>En utilisant le noms des arguments</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-36" style="background:;">
  <!--  <a href="#slide-36"></a> -->
  <hgroup>
    <h1>Utilisons notre fonction avec des vecteurs</h1>
  </hgroup>
  <article data-timings="">
    <p>Le language de programmation R permet de faire aussi le calcul sur des vecteurs :</p>

<pre><code class="r">vecA &lt;- tableau[,1]
vecB &lt;- tableau[,2]
prodsum(vecA, vecB)
</code></pre>

<pre><code>## [1]  0.18928528 -0.11034769  0.24581577 -0.21653056 -0.09480983
</code></pre>

<pre><code class="r">prodsum(tableau[,1], tableau[,2])
</code></pre>

<pre><code>## [1]  0.18928528 -0.11034769  0.24581577 -0.21653056 -0.09480983
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-37" style="background:;">
  <!--  <a href="#slide-37"></a> -->
  <hgroup>
    <h1>Utilisons notre fonction avec des vecteurs</h1>
  </hgroup>
  <article data-timings="">
    <p>L&#39;exemple précédent fonctionne bien car <code>vecA</code> et <code>vecB</code> contiennent le même nombre de chiffres, ils ont la même longueur. Que ce passe-t-il si les vecteurs n&#39;ont pas la même longueur ?</p>

<pre><code class="r">vec2 &lt;- tableau[1:2,1]
vec3 &lt;- tableau[1:3,1]
vec4 &lt;- tableau[1:4,2]
prodsum(vec3, vec4)
</code></pre>

<pre><code>## Warning in x * y: la taille d&#39;un objet plus long n&#39;est pas multiple de la
## taille d&#39;un objet plus court
</code></pre>

<pre><code>## Warning in x + y: la taille d&#39;un objet plus long n&#39;est pas multiple de la
## taille d&#39;un objet plus court
</code></pre>

<pre><code>## [1]  0.1892853 -0.1103477  0.2458158 -0.2814360
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-38" style="background:;">
  <!--  <a href="#slide-38"></a> -->
  <hgroup>
    <h1>La construction d&#39;une fonction</h1>
  </hgroup>
  <article data-timings="">
    <p>Le <strong>recyclage</strong> est une propriété des fonctions mathematiques de base du language R (e.g. <code>+</code>, <code>-</code>, <code>*</code> et <code>/</code>). Lorsque deux vecteurs sont de longueurs différentes, les valeurs du vecteur le plus court sont réutilisées, dans l&#39;ordre, pour combler le nombre de valeurs manquantes entre les deux vecteurs. Cette propriété du langage R peut être très pratique mais aussi <strong>générer beaucoup de problèmes</strong>.</p>

<p>Comme on le voit dans l&#39;exemple, un message d&#39;avertissement est envoyé si la longueur du plus petit vecteur n&#39;est pas un multiple du vecteur le plus long. Par contre, si le vecteur le plus court est un multiple du vecteur le plus long, aucun message d&#39;avertissement est envoyé et ce même si le résultat n&#39;a pas de sense. </p>

<p>Comment faire pour régler ce problème ?</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-39" style="background:;">
  <!--  <a href="#slide-39"></a> -->
  <hgroup>
    <h1>Ajouter des trappes dans une fonction</h1>
  </hgroup>
  <article data-timings="">
    <p>Pour régler le problème subtile présenté dans la diapositive précédente, on peut ajouter des trappes dans la fonction qui retournent un message d&#39;erreur. Voici un exemple :</p>

<pre><code class="r">prodsum &lt;- function(x, y){
  if(length(x) != length(y)){
    stop(&quot;&#39;x&#39; est de taille différente de &#39;y&#39;&quot;)
  }
  res &lt;- (x*y)/(x+y)
  return(res)
}
</code></pre>

<p>Les lignes de codes ajoutées mesure la longeur de <code>x</code> et <code>y</code> et lorsqu&#39;ils sont d&#39;une longueur différente, un message d&#39;erreur est envoyé et le reste du code dans la fonction n&#39;est pas évalué. </p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-40" style="background:;">
  <!--  <a href="#slide-40"></a> -->
  <hgroup>
    <h1>Ajouter des trappes dans une fonction</h1>
  </hgroup>
  <article data-timings="">
    <p>Cette trappe permet de corriger le problème mentionné dans la diapositive précédente :</p>

<pre><code class="r">prodsum(vec2,vec4)
</code></pre>

<pre><code>## Error in prodsum(vec2, vec4): &#39;x&#39; est de taille différente de &#39;y&#39;
</code></pre>

<pre><code class="r">prodsum(vec3,vec4)
</code></pre>

<pre><code>## Error in prodsum(vec3, vec4): &#39;x&#39; est de taille différente de &#39;y&#39;
</code></pre>

<p>Notez que le message d&#39;erreur envoyé est composé par le programmeur. Par contre, il est important que le message d&#39;erreur soit court et précis.</p>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-41" style="background:;">
  <!--  <a href="#slide-41"></a> -->
  <hgroup>
    <h1>Utilisons notre fonction avec des tableaux</h1>
  </hgroup>
  <article data-timings="">
    <p>Le language de programmation R permet de faire aussi le calcul sur des matrices</p>

<pre><code class="r">tableau2 &lt;- data.frame(x_2=rnorm(5)^2,y_2=rnorm(5)^2)
prodsum(tableau, tableau2)
</code></pre>

<pre><code>##             x           y
## 1  0.32198166 0.235073600
## 2 -0.11886556 0.018229391
## 3  0.26817462 0.410121945
## 4  0.15372930 0.047783547
## 5  0.04926741 0.005466112
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-42" style="background:;">
  <!--  <a href="#slide-42"></a> -->
  <hgroup>
    <h1>Utilisons notre fonction avec des tableaux</h1>
  </hgroup>
  <article data-timings="">
    <p>Le language de programmation R permet de faire aussi le calcul sur des matrices</p>

<pre><code class="r">tableau2 &lt;- data.frame(x_2=rnorm(5)^2,y_2=rnorm(5)^2)
prodsum(tableau, tableau2)
</code></pre>

<pre><code>##             x          y
## 1  0.38647341  0.1755865
## 2 -0.80034482  0.3796770
## 3  0.01647881  0.1020211
## 4  1.29286853 -0.2149701
## 5  0.55647570 -0.2713502
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-43" style="background:;">
  <!--  <a href="#slide-43"></a> -->
  <hgroup>
    <h1>La sortie</h1>
  </hgroup>
  <article data-timings="">
    <p>Une fonction peut réaliser plusieurs opérations avec les mêmes éléments d&#39;entrée et on peut souhaiter retourner ces arguments dans une liste :</p>

<pre><code class="r">ma_fonction &lt;- function(x) {

  # Calcul de la moyenne
  res1 &lt;- mean(x)

  # Calcul de l&#39;écart-type
  res2 &lt;- sd(x)

  # Calcul du coefficient de variation
  res3 &lt;- res2/res1

  # On regroupe les résultats dans une liste
  final = list(moyenne = res1, ecart_type = res2, CV = res3)

  # Et on retourne le tout hors de la fonction
  return(final)
}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-44" style="background:;">
  <!--  <a href="#slide-44"></a> -->
  <hgroup>
    <h1>La sortie</h1>
  </hgroup>
  <article data-timings="">
    <p>Une fonction peut réaliser plusieurs opérations avec les mêmes éléments d&#39;entrée et on peut souhaiter retourner ces arguments dans une liste :</p>

<pre><code class="r">test &lt;- ma_fonction(rnorm(n = 100, mean = 1, sd = 0.5))
test
</code></pre>

<pre><code>## $moyenne
## [1] 1.052235
## 
## $ecart_type
## [1] 0.5070926
## 
## $CV
## [1] 0.4819196
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-45" style="background:;">
  <!--  <a href="#slide-45"></a> -->
  <hgroup>
    <h1>Quelques règles utiles lorsqu&#39;on construit une fonction</h1>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Tout ce qui se trouve à l&#39;intérieur d&#39;une fonction est <strong>entièrement</strong> indépendent dans ce qui se trouve à l&#39;extérieur d&#39;une fonction ;</li>
<li>Donner une nom représentatif à la fonction, qui résume ce que la fonction fait ;</li>
<li>Tous les arguments de la fonction doivent être utilisés;</li>
<li>Les arguments doivent avoir des noms représentatifs ;</li>
<li>Commentez les étapes du code ;</li>
<li>Prenez le temps de décrire les arguments sous forme de commentaires en début de fonction ;</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="transition" id="slide-46" style="background:;">
  <!--  <a href="#slide-46"></a> -->
  <hgroup>
    <h1>Exercice de fin de séance</h1>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>
<slide class="" id="slide-47" style="background:;">
  <!--  <a href="#slide-47"></a> -->
  <hgroup>
    <h1>Abondances relatives</h1>
  </hgroup>
  <article data-timings="">
    <p>Toujours à partir du fichier <a href="./donnees/quadrats.csv">quadrats.csv</a>, calculer une fonction qui vous retournera les statistiques descriptives suivantes pour une série de données (une espèce en l&#39;occurrence) : </p>

<ol>
<li>L&#39;abondance moyenne</li>
<li>L&#39;abondance totale</li>
<li>Le coefficent de variation de l&#39;abondance</li>
<li>La densité maximale dans un quadrat</li>
<li>La densité minimale dans un quadrat</li>
</ol>

<p>Ensuite, appliquez cette fonction sur l&#39;ensemble des espèces au moyen de la fonction <em>apply()</em></p>

  </article>
  <!-- Presenter Notes -->
</slide>
    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='NA'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Astuce: générer des nombres aléatoires'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Opérateurs de base'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Opérateurs de base'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Opérateurs de base'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Opérations sur des vecteurs et matrices'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='Opérations sur des vecteurs et matrices'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='Opérations avancées'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='Opérations avancées'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='Opérations avancées'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Arrondir'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Opérations sur des matrices'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Opérations sur des matrices'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='Opérations sur des matrices'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Exercice'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Abondances relatives'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Abondances relatives'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='Abondances relatives'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='Les fonctions'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Qu&#39;est-ce qu&#39;une fonction ?'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='Un simple exemple'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='Pourquoi utiliser des fonctions ?'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='La construction d&#39;une fonction'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='La construction d&#39;une fonction'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='La construction d&#39;une fonction'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='La construction d&#39;une fonction'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='La construction d&#39;une fonction'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='La construction d&#39;une fonction'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='La construction d&#39;une fonction'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='La construction d&#39;une fonction'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='Petit problème'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='Comment construit-on une fonction ?'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='Comment rendre la fonction plus générale ?'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='Comment rendre la fonction plus générale ?'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='Utilisons notre fonction avec des chiffres'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Utilisons notre fonction avec des vecteurs'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Utilisons notre fonction avec des vecteurs'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='La construction d&#39;une fonction'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='Ajouter des trappes dans une fonction'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Ajouter des trappes dans une fonction'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Utilisons notre fonction avec des tableaux'>
         41
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Utilisons notre fonction avec des tableaux'>
         42
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='La sortie'>
         43
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='La sortie'>
         44
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Quelques règles utiles lorsqu&#39;on construit une fonction'>
         45
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Exercice de fin de séance'>
         46
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='Abondances relatives'>
         47
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="./libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="./libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>